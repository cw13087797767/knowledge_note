# 浏览器渲染过程与原理
    浏览器渲染页面的过程可以划分为接收资源（html，css，js等）、解析资源、构建dom数和CSSOM、构建渲染树、渲染布局、绘制等几个步骤。
    用户看到页面可以分成两个部分，页面内容加载完成（DOMContentLoaded）和页面资源加载完成（load）

## 页面内容加载完成和页面资源加载完成
    这两者的执行顺序是先页面内容加载完成，再页面资源加载完成。
    页面内容加载完成（DOMContentLoaded）：
        仅当dom加载完成，不包含样式、图片等其他资源
    页面资源加载完成（load）：
        页面所有的dom、样式、脚本文件、图片等资源都已加载完毕

## 浏览器渲染过程
    1、浏览器将获取的html文档解析成DOM树
    2、解析css样式，生成CSSOM（css object model）
    3、将DOM树和CSSOM合并成渲染树（render tree）
    4、渲染树布局
    5、浏览器将渲染树的各个节点进行绘制

    在实际渲染中并不一定是一次性按顺序执行完渲染过程，若执行过程有js或css的某些操作修改了dom或者CSSOM，则会重复执行相应的过程

## 回流和重绘（reflow和repaint）
    HTML默认是流式布局的，但CSS和JS会打破这种布局，改变DOM的外观样式以及大小和位置。因此我们就需要知道两个概念：回流（replaint）和重绘（reflow）。

### 回流（reflow）
    当页面的布局或者DOM树发成改变时，就会发成回流。

### 重绘（repaint）
    当页面某个dom元素的样式发生改变（仅限于不影响布局或内部布局属性）时，会重新渲染样式

### 回流（reflow）和重绘（repaint）的关系
    当回流发生时必定会重绘，但重绘发生时不一定会引起回流

## 优化渲染效率的建议
    1、合理的书写html和css，且不要忘了文档编码类型。
    2、样式文件写在head中，脚本文件放在body结束的地方。
    3、简化与优化css选择器，尽量将嵌套层减少到最小。
    4、DOM 的多个读操作（或多个写操作），应该放在一起。不要两个读操作之间，加入一个写操作。
    5、如果某个样式是通过重排得到的，那么最好缓存结果。避免下一次用到的时候，浏览器又要重排。
    6、不要一条条地改变样式，而要通过改变class，或者csstext属性，一次性地改变样式。
    7、尽量用transform来做形变和位移。
    8、先将元素设为display: none（需要1次重排和重绘），然后对这个节点进行100次操作，最后再恢复显示（需要1次重排和重绘）。这样一来，你就用两次重新渲染，取代了可能高达100次的重新渲染。