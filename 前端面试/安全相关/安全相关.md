## 前端安全相关面试题

### 同源策略
协议、域名、端口一致。浏览器的同源策略是：一个域上的脚本和cookie是不允许另外一个域访问的。如果没有同源策略的限制，那么网站的cookie等信息就会被其他人读取，就会造成隐私数据的泄露。 

### XSS攻击
XSS是跨站脚本攻击。攻击者想网站注入恶意代码，通过恶意代码对网站进行修改、将隐私数据发送给攻击者，将被攻击者重定向到另一个受攻击者控制的网站。

#### 常见手法

##### 链接形式（反射型XSS）
攻击者发送一个恶意链接给被攻击者，被攻击者在点开链接并进行浏览的时候，就会执行恶意脚本，然后隐私信息就被获取了。

##### 留言形式（存储型XSS）
比如博客，攻击者在博客提交一条带有恶意代码的留言存入数据库，在用户查询的时候，就会从数据库中读取这条数据，然后解析。

##### DOM Based XSS
通过恶意脚本修改页面的dom结构，是纯粹发生在客户端的攻击。dom型XSS攻击中，取出和执行恶意代码由浏览器完成，属于前端js自身的安全漏洞。
攻击流程：
1、A给B发送一个恶意构造的url
2、B点击url后html页面获取攻击性的代码，比如通过location.hash获取参数等
3、攻击性代码当做html代码写入页面
4、html页面在B浏览器中执行js，可以执行B所具有的权限下的命令


#### 防范手段
1、输入过滤，过滤用户输入的敏感字符，比如&<>/等
2、前端限制输入长度，增加XSS攻击难度
3、后端响应头set-cookie中设置httpOnly（httpOnly作用是服务端设置后，如果浏览器支持的话，则无法通过js脚本获取到cookie信息）


### CSRF 跨域请求伪造
攻击者构造一个后端链接，去诱导用户点击或者自主请求，就是利用用户已经获取到注册凭证，绕过后端的用户验证。

#### 攻击流程
1、用户登录A站点，并保存了登录凭证
2、攻击者诱导用户访问B站点
3、B站点向A站点发起请求，浏览器会默认携带A站点的cookie信息
4、A站点接受后会对其进行验证，并且会误认为是用户发起的请求，同时以用户的身份执行相应的操作。

#### 常见手法
1、img标签，用户访问页面时，浏览器会自动请求图片的url地址
2、自动提交的表单页面，通常是构造一个自动提交的表单在页面上，模拟用户完成一个post请求
3、链接，通常是需要诱骗用户点击才会触发

#### 防范手段
1、请求头中携带token
2、后端验证请求头中的referer
3、验证码


### 点击劫持
利用iframe标签，攻击者将iframe标签放到web页面上，并且提升iframe的层级并让其透明，再在外层放歌假页面诱导用户点击。

#### 防范手段
服务器设置 X-Frame-Options: DENY +https
服务器端可设置HTTP头X-Frame-Options：DENY来让浏览器主动禁止iframe内嵌，但是这种方式需要结合HTTPS来实现，因为HTTP不可靠，容易被窃听篡改内容